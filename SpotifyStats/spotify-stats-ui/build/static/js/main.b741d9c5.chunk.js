(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e){e.exports={defaultTrackImgSize:140}},159:function(e){e.exports={baseBackendUrl:"https://localhost:44341/api"}},168:function(e,t,a){},169:function(e,t,a){},173:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(25),i=a.n(s);a(73),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(4),o=a(5),l=a(8),u=a(7),m=a(14),d=a(9),h=a(32),y=a(15),p=a(64),g=a.n(p),f=a(45),v=Symbol(),b=Symbol(),E=function(){function e(t){var a=this;if(Object(c.a)(this,e),this.get=function(){var e;return(e=a.session).get.apply(e,arguments)},this.post=function(){var e;return(e=a.session).post.apply(e,arguments)},this.put=function(){var e;return(e=a.session).put.apply(e,arguments)},this.patch=function(){var e;return(e=a.session).patch.apply(e,arguments)},this.remove=function(){var e;return(e=a.session).delete.apply(e,arguments)},t!==b)throw new Error("Cannot construct singleton");this.session=g.a.create({baseURL:"".concat(f.baseBackendUrl),headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Headers":"*"}})}return Object(o.a)(e,null,[{key:"instance",get:function(){return this[v]||(this[v]=new e(b)),this[v]}}]),e}().instance,S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={authFailed:!1,authComplete:!1},a.parseAndSendCode=a.parseAndSendCode.bind(Object(m.a)(a)),a.getBasicInfo=a.getBasicInfo.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.parseAndSendCode()}},{key:"sendCode",value:function(e){return E.post("/spotify-auth/receive-code",JSON.stringify({code:e}))}},{key:"parseAndSendCode",value:function(){var e=this,t=new URLSearchParams(this.props.location.search),a=t.get("code");a?this.sendCode(a).then(function(t){return e.setState({authComplete:!0})}).catch(function(t){return e.setState({authFailed:!0})}):t.get("error")&&this.setState({authFailed:!0})}},{key:"fetchBasicInfo",value:function(){E.get("/spotify/basic-info").then(function(e){return console.log("Response is: ",e)})}},{key:"getBasicInfo",value:function(){this.fetchBasicInfo()}},{key:"render",value:function(){return this.state.authComplete?n.a.createElement(y.a,{to:"/user-tracks"}):this.state.authFailed&&n.a.createElement("div",{style:{display:"flex",justifyContent:"center"}}," AUTHORIZATION FAILED")}}]),t}(n.a.Component),k=a(34),w=a(67),j=(a(168),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"progress-title"},this.props.title),n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},n.a.createElement("div",{style:{display:"block"}},n.a.createElement("div",{className:"progress"},n.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:this.props.percent+"%"}})))))}}]),t}(n.a.Component)),x=(a(63),a(169),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={librarySummary:e.librarySummary},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container justify-content-center"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-xl-6",style:{maxWidth:"500px"}},n.a.createElement("div",{className:"tile"},n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"header"},"Library Info"),n.a.createElement("div",{className:"dates"},n.a.createElement("div",{className:""},n.a.createElement("strong",null,"Favorite Artist"),this.state.librarySummary.libraryInfo.favoriteArtistName,n.a.createElement("span",null)),n.a.createElement("div",{className:""},n.a.createElement("strong",null,"Songs Per Artist"),this.state.librarySummary.libraryInfo.songsPerArtist.toFixed(2),n.a.createElement("span",null))),n.a.createElement("div",{className:"dates"},n.a.createElement("div",{className:""},n.a.createElement("strong",null,"Shortest Song"),this.state.librarySummary.libraryInfo.shortestSongName),n.a.createElement("div",{className:""},n.a.createElement("strong",null,"Longest Song"),this.state.librarySummary.libraryInfo.longestSongName))))),n.a.createElement("div",{className:"col-xl-6",style:{maxWidth:"500px"}},n.a.createElement("div",{className:"tile"},n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"header"},"Song Averages"),n.a.createElement("div",{className:"stats"},n.a.createElement("div",null,n.a.createElement("strong",null,"Acousticness"),this.state.librarySummary.trackAverages.acousticnessAverage.toFixed(2)),n.a.createElement("div",null,n.a.createElement("strong",null,"Danceability"),this.state.librarySummary.trackAverages.danceabilityAverage.toFixed(2)),n.a.createElement("div",null,n.a.createElement("strong",null,"Energy"),this.state.librarySummary.trackAverages.energyAverage.toFixed(2)),n.a.createElement("div",null,n.a.createElement("strong",null,"Instrumentalness"),this.state.librarySummary.trackAverages.instrumentalnessAverage.toFixed(2))),n.a.createElement("div",{className:"stats"},n.a.createElement("div",null,n.a.createElement("strong",null,"Loudness"),this.state.librarySummary.trackAverages.loudnessAverage.toFixed(2)),n.a.createElement("div",null,n.a.createElement("strong",null,"Popularity"),this.state.librarySummary.trackAverages.popularityAverage.toFixed(2)),n.a.createElement("div",null,n.a.createElement("strong",null,"Tempo"),this.state.librarySummary.trackAverages.tempoAverage.toFixed(2)),n.a.createElement("div",null,n.a.createElement("strong",null,"Valence (Positivity)"),this.state.librarySummary.trackAverages.valenceAverage.toFixed(2))))))))}}]),t}(n.a.Component)),O=function(e){function t(e){var a;Object(c.a)(this,t);return(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={size:e.size?e.size:64,margin:e.margin?e.margin:10},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"spinner-border",role:"status",style:{width:this.state.size+"px",height:this.state.size+"px",margin:this.state.margin+"px"}},n.a.createElement("span",{className:"sr-only",style:{width:this.state.size+"px",height:this.state.size+"px"}},"Loading..."))}}]),t}(n.a.Component),C=a(45),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).switchSort=function(e){var t=null==a.state.sortDescDictionary[e]||a.state.sortDescDictionary[e];a.setState(function(a){return{sortObjectList:[{id:e,desc:t}],sortDescDictionary:Object(k.a)({},e,!t),selectedSortDesc:Object(k.a)({},e,!0)}})},a.loadTracks=function(e){E.get("/spotify/user-tracks").then(function(t){return a.setState({tracksWithFeatures:t.data,loadingTracks:!1}),e()})},a.loadLibrarySummary=function(){E.get("/spotify/tracks-summary").then(function(e){a.setState({userLibrarySummary:e.data,loadingSummary:!1})})},a.refreshTracks=function(){return E.get("/spotify/refresh-tracks")},a.toggleShowSummary=function(){a.setState({showSummary:!a.state.showSummary})},a.getListColumns=function(){return[{Header:"",Cell:function(e){return e.original.image&&n.a.createElement("div",{className:"ablbum-img-container"},n.a.createElement("img",{alt:"",height:C.defaultTrackImgSize,src:e.original.image.url}))},id:"trackImage",width:C.defaultTrackImgSize},{Header:"Title",accessor:"title",width:300},{Header:"Artist",accessor:"artist",width:300},{Header:"Release Date",accessor:"releaseDate",width:200},{Header:"Popularity",accessor:"popularity",show:!1},{Header:"Danceability",accessor:"danceability",show:!1},{Header:"Energy",accessor:"energy",show:!1},{Header:"Loudness",accessor:"loudness",show:!1},{Header:"Acousticness",accessor:"acousticness",show:!1},{Header:"Instrumentalness",accessor:"instrumentalness",show:!1},{Header:"Valence",accessor:"valence",show:!1},{Header:"Tempo",accessor:"tempo",show:!1},{Header:"",Cell:function(e){return n.a.createElement("div",null,n.a.createElement(j,{percent:a.doubleToPercent(e.original.acousticness),title:"Acousticness"}),n.a.createElement(j,{percent:a.doubleToPercent(e.original.energy),title:"Energy"}),n.a.createElement(j,{percent:a.doubleToPercent(e.original.danceability),title:"Danceability"}),n.a.createElement(j,{percent:a.doubleToPercent(e.original.instrumentalness),title:"Instrumentalness"}),n.a.createElement(j,{percent:a.loudnessToPercent(e.original.loudness),title:"Loudness"}),n.a.createElement(j,{percent:e.original.popularity,title:"Popularity"}),n.a.createElement(j,{percent:a.tempoToPercent(e.original.tempo),title:"Tempo"}),n.a.createElement(j,{percent:a.doubleToPercent(e.original.valence),title:"Valence (Positivity)"}))},minWidth:400}]},a.getListData=function(){return a.state.tracksWithFeatures.map(function(e){return{artist:e.track.artistNames.join(", "),acousticness:e.features.acousticness,danceability:e.features.danceability,energy:e.features.energy,image:e.track.image,instrumentalness:e.features.instrumentalness,loudness:e.features.loudness,popularity:e.track.popularity,releaseDate:e.track.releaseDate,tempo:e.features.tempo,title:e.track.name,valence:e.features.valence}})},a.state={tracksWithFeatures:[],sortObjectList:[],sortDescDictionary:{},selectedSortDesc:{},userLibrarySummary:{},showSummary:!0,loadingTracks:!0,loadingSummary:!0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.refreshTracks().then(function(){return e.loadTracks(e.loadLibrarySummary)})}},{key:"doubleToPercent",value:function(e){return Math.round(100*e)}},{key:"loudnessToPercent",value:function(e){return Math.round(100*(1-e/-30))}},{key:"tempoToPercent",value:function(e){return Math.round(e/200*100)}},{key:"getSortButtonClass",value:function(e){return this.state.selectedSortDesc[e.toLowerCase()]?this.state.sortDescDictionary[e.toLowerCase()]?"btn-secondary":"btn-primary":""}},{key:"render",value:function(){var e=this,t=[],a=this.getListColumns(),r=this.state.tracksWithFeatures&&this.state.tracksWithFeatures.length>0;return r&&(t=this.getListData()),n.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.a.createElement("div",{style:{width:"100%",padding:"25px",maxWidth:"1500px"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},n.a.createElement("div",null,this.state.tracksWithFeatures?this.state.tracksWithFeatures.length:"No"," tracks loaded"),n.a.createElement("button",{disabled:!this.state.userLibrarySummary.trackAverages,className:"btn btn-primary",onClick:this.toggleShowSummary},this.state.showSummary?"Hide":"Show"," Summary"),this.state.loadingSummary?n.a.createElement(O,{size:100,style:{margin:"15px"}}):this.state.showSummary&&this.state.userLibrarySummary.libraryInfo&&n.a.createElement(x,{librarySummary:this.state.userLibrarySummary}),n.a.createElement("span",{style:{paddingTop:"20px"}},"Sort By:"),n.a.createElement("div",{style:{maxWidth:"900px"}},n.a.createElement("div",{className:"row no-gutters"},["Acousticness","Danceability","Energy","Instrumentalness","Loudness","Popularity","Tempo","Valence"].map(function(t,a){return n.a.createElement("div",{key:a,className:"col-lg-auto",style:{display:"flex",justifyContent:"center"}},n.a.createElement("button",{className:"btn ".concat(e.getSortButtonClass(t)),onClick:function(){return e.switchSort(t.toLowerCase())}},t))})))),n.a.createElement("div",{className:"list-container"},this.state.loadingTracks?n.a.createElement(O,{size:200,style:{margin:"15px"}}):r&&n.a.createElement(w.a,{defaultSortMethod:this.sortMethod,sorted:this.state.sortObjectList,onSortedChange:function(t){e.setState({sortObjectList:t})},data:t,columns:a}))))}}]),t}(n.a.Component);function A(){return n.a.createElement(h.a,null,n.a.createElement(y.b,{path:"/",exact:!0,component:T}),n.a.createElement(y.b,{path:"/after-auth",exact:!0,component:S}),n.a.createElement(y.b,{path:"/user-tracks",exact:!0,component:N}))}var T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).routeChange=a.routeChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"routeChange",value:function(){var e=a(170).stringify({client_id:"9283b48f67a94757b9c9a6f1e01f1599",redirect_uri:"http://localhost:3000/after-auth",response_type:"code",scope:"user-top-read user-read-recently-played user-read-private user-read-email user-library-read"}),t="https://accounts.spotify.com/authorize?".concat(e);window.location.href=t}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"25px"}},n.a.createElement("button",{className:"btn-large btn-primary auth-button",onClick:this.routeChange},"Login To Spotify")))))}}]),t}(n.a.Component);i.a.render(n.a.createElement(A,null),document.getElementById("root"));var L=A;a(173),a(174);i.a.render(n.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,a){var r,n=a(91),s=a(158);r=a(159),e.exports=n(s,r)},63:function(e,t,a){},68:function(e,t,a){e.exports=a(175)},73:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.b741d9c5.chunk.js.map